extends layout

block content
  // Hero Section
  .hero.min-h-screen.bg-gradient-to-r.from-primary.to-secondary
    .hero-content.text-center
      .max-w-2xl
        h1.text-5xl.font-bold.text-base-100.mb-6 Khám Phá Thế Giới Nước Hoa
        p.text-xl.text-base-100.mb-8.opacity-90 Trải nghiệm những mùi hương tinh tế, sang trọng và đầy cá tính từ các thương hiệu hàng đầu thế giới
        .flex.justify-center.gap-4.flex-wrap
          a.btn.btn-lg.btn-primary(href='#perfumes')
            i.fas.fa-search.mr-2
            | Khám Phá Ngay
          if !currentUser
            a.btn.btn-lg.btn-outline.btn-accent(href='/register')
              i.fas.fa-user-plus.mr-2
              | Tạo Tài Khoản

  // Main Content
  .container.mx-auto.px-4.py-16
    // Stats Section
    .stats.shadow.w-full.mb-12
      .stat
        .stat-figure.text-primary
          i.fas.fa-spray-can.text-4xl
        .stat-title Sản phẩm
        .stat-value.text-primary #{perfumes ? perfumes.length : 0}
        .stat-desc Nước hoa cao cấp
      .stat
        .stat-figure.text-secondary
          i.fas.fa-star.text-4xl
        .stat-title Thương hiệu
        .stat-value.text-secondary #{brands ? brands.length : 0}
        .stat-desc Các nhãn hiệu nổi tiếng
      .stat
        .stat-figure.text-accent
          i.fas.fa-heart.text-4xl
        .stat-title Đánh giá
        .stat-value.text-accent 4.9/5
        .stat-desc Từ khách hàng

    // Title Section
    .text-center.mb-12#perfumes
      h2.text-4xl.font-bold.mb-4 Bộ Sưu Tập Nước Hoa
      p.text-lg.opacity-70 Khám phá những mùi hương độc đáo và tinh tế

    // Search & Filter Form
    .card.bg-base-200.shadow-xl.mb-12
      .card-body
        form(method='get', action='/')
          .grid.gap-4(class='md:grid-cols-3')
            .form-control
              label.label
                span.label-text
                  i.fas.fa-search.mr-2
                  | Tìm kiếm theo tên
              input.input.input-bordered.input-primary(type='text', name='q', placeholder='Nhập tên nước hoa...', value=q)
            .form-control
              label.label
                span.label-text
                  i.fas.fa-filter.mr-2
                  | Lọc theo thương hiệu
              select.select.select-bordered.select-primary(name='brand')
                option(value='') Tất cả thương hiệu
                each b in brands
                  option(value=b._id, selected=(String(brand)===String(b._id)))= b.brandName
            .form-control(class='md:self-end')
              button.btn.btn-primary.w-full(type='submit')
                i.fas.fa-search.mr-2
                | Tìm kiếm

    // Perfumes Grid
    if perfumes && perfumes.length
      .grid.gap-6.mb-12(class='md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4')
        each p in perfumes
          .card.bg-base-100.shadow-xl.transition-all.duration-300(class='hover:shadow-2xl hover:scale-105')
            figure.relative.h-64.overflow-hidden
              img.w-full.h-full.object-cover.transition-transform.duration-300(class='hover:scale-110', src=p.uri, alt=p.perfumeName)
              if p.concentration && p.concentration.toLowerCase() === 'extrait'
                .badge.badge-secondary.absolute.top-4.right-4.gap-2
                  i.fas.fa-star
                  | Extrait
            .card-body
              h3.card-title.text-lg
                | #{p.perfumeName}
                if p.concentration && p.concentration.toLowerCase() !== 'extrait'
                  .badge.badge-outline.badge-sm= p.concentration
              .flex.items-center.gap-2.text-sm.opacity-70.mb-2
                i.fas.fa-tag
                span= p.brand && p.brand.brandName
              .flex.items-center.gap-2.mb-3
                .badge.badge-ghost
                  i.fas.fa-venus-mars.mr-1
                  | #{p.targetAudience}
                .badge.badge-ghost
                  i.fas.fa-flask.mr-1
                  | #{p.volume}ml
              .divider.my-2
              .card-actions.justify-between.items-center
                .text-2xl.font-bold.text-primary $#{typeof p.price === 'number' ? p.price.toFixed(0) : p.price}
                a.btn.btn-primary.btn-sm(href='/perfumes/' + p._id)
                  i.fas.fa-eye.mr-1
                  | Xem chi tiết
    else
      .alert.alert-info.shadow-lg.max-w-2xl.mx-auto
        div
          i.fas.fa-info-circle.text-2xl
          div
            h3.font-bold Không tìm thấy sản phẩm
            .text-sm Vui lòng thử lại với từ khóa khác hoặc chọn thương hiệu khác
